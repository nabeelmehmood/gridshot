(this.webpackJsonpreact=this.webpackJsonpreact||[]).push([[0],{20:function(e,t,c){e.exports={gameOverlay:"GameOverlay_gameOverlay__11lfk",counter:"GameOverlay_counter__10t_X",count:"GameOverlay_count__1Jwug",finishedOverlay:"GameOverlay_finishedOverlay__3Uj9q"}},37:function(e,t,c){},41:function(e,t,c){},42:function(e,t,c){},43:function(e,t,c){"use strict";c.r(t);var n,s=c(6),i=c(30),r=c.n(i),o=c(15),a=c(10),u=c(12),j=c(11),l=c(5),d=Object(s.createContext)(),b="NOT_STARTED",O="START_TIMER",f="STARTED",x="FINISHED",v=10,m=5,p=75,h=0,y=function(e){var t=e.children,c=Object(s.useState)(60),i=Object(j.a)(c,2),r=i[0],o=i[1],a=Object(s.useState)(b),u=Object(j.a)(a,2),v=u[0],m=u[1],y=Object(s.useState)(0),S=Object(j.a)(y,2),g=S[0],C=S[1],k=Object(s.useState)(0),E=Object(j.a)(k,2),T=E[0],N=E[1],I=Object(s.useState)(0),_=Object(j.a)(I,2),L=_[0],w=_[1],M=Object(s.useState)(p),G=Object(j.a)(M,2),R=G[0],z=G[1],A=Object(s.useState)(h),D=Object(j.a)(A,2),B=D[0],F=D[1];return Object(s.useEffect)((function(){var e=localStorage.getItem("topScore"),t=localStorage.getItem("sensitivity"),c=localStorage.getItem("fov");e&&w(e),c&&z(c),t&&F(t)}),[]),Object(s.useEffect)((function(){localStorage.setItem("sensitivity",B),localStorage.setItem("fov",R)}),[B,R]),Object(s.useEffect)((function(){v===O&&(n=setInterval((function(){o((function(e){return e>1?e-1:(clearInterval(n),m(x),0)}))}),1e3),m(f)),v===x&&clearInterval(n)}),[v]),Object(l.jsx)(d.Provider,{value:{timeLeft:r,setTimeLeft:o,score:g,setScore:C,gameStart:v,setGameStart:m,totalClicks:T,setTotalClicks:N,topScore:L,setTopScore:w,fov:R,setFov:z,sensitivity:B,setSensitivity:F},children:t})},S=function(e){for(var t=Math.floor(21*Math.random());e.includes(t);)t=Math.floor(21*Math.random());return t},g=function(e){var t=e.setScore,c=void 0===t?function(){}:t,n=Object(s.useState)([]),i=Object(j.a)(n,2),r=i[0],o=i[1];Object(s.useEffect)((function(){var e=[];e.push(S(e)),e.push(S(e)),e.push(S(e)),o(e)}),[]),console.log(r);var a=Object(s.useCallback)((function(e){var t=e.position,n=e.id;return Object(l.jsxs)("mesh",{onClick:function(e){var t=e.object.sphereId,n=S(r),s=Object(u.a)(r).filter((function(e){return e!==t}));s.push(n),o(s),c((function(e){return e+1}))},sphereId:n,position:t,children:[Object(l.jsx)("sphereGeometry",{args:[1,32,32]}),Object(l.jsx)("meshPhysicalMaterial",{color:"red"})]})}),[r]);return Object(l.jsxs)("group",{position:[0,0,-9],children:[r.includes(0)&&Object(l.jsx)(a,{id:0,position:[9,1,0]}),r.includes(1)&&Object(l.jsx)(a,{id:1,position:[6,1,0]}),r.includes(2)&&Object(l.jsx)(a,{id:2,position:[3,1,0]}),r.includes(3)&&Object(l.jsx)(a,{id:3,position:[0,1,0]}),r.includes(4)&&Object(l.jsx)(a,{id:4,position:[-3,1,0]}),r.includes(5)&&Object(l.jsx)(a,{id:5,position:[-6,1,0]}),r.includes(6)&&Object(l.jsx)(a,{id:6,position:[-9,1,0]}),r.includes(7)&&Object(l.jsx)(a,{id:7,position:[9,4,0]}),r.includes(8)&&Object(l.jsx)(a,{id:8,position:[6,4,0]}),r.includes(9)&&Object(l.jsx)(a,{id:9,position:[3,4,0]}),r.includes(10)&&Object(l.jsx)(a,{id:10,position:[0,4,0]}),r.includes(11)&&Object(l.jsx)(a,{id:11,position:[-3,4,0]}),r.includes(12)&&Object(l.jsx)(a,{id:12,position:[-6,4,0]}),r.includes(13)&&Object(l.jsx)(a,{id:13,position:[-9,4,0]}),r.includes(14)&&Object(l.jsx)(a,{id:14,position:[9,7,0]}),r.includes(15)&&Object(l.jsx)(a,{id:15,position:[6,7,0]}),r.includes(16)&&Object(l.jsx)(a,{id:16,position:[3,7,0]}),r.includes(17)&&Object(l.jsx)(a,{id:17,position:[0,7,0]}),r.includes(18)&&Object(l.jsx)(a,{id:18,position:[-3,7,0]}),r.includes(19)&&Object(l.jsx)(a,{id:19,position:[-6,7,0]}),r.includes(20)&&Object(l.jsx)(a,{id:20,position:[-9,7,0]})]})},C=(c(37),c(46)),k=[0,0,0],E=Object(s.forwardRef)((function(e,t){var c=1+.1*e.sensitivity;return Object(o.b)((function(){if(t.current.camera.fov=e.fov,t.current.camera.updateProjectionMatrix(),0===t.current.camera.rotation.x&&0===t.current.camera.rotation.y&&0===t.current.camera.rotation.z)k=[0,0,0];else{var n={x:k[0]-t.current.camera.rotation.x,y:k[1]-t.current.camera.rotation.y,z:k[2]-t.current.camera.rotation.z},s=[t.current.camera.rotation.x-n.x*c,t.current.camera.rotation.y-n.y*c,t.current.camera.rotation.z-n.z*c];t.current.camera.rotation.set(s[0],s[1],s[2]),k[0]=t.current.camera.rotation.x,k[1]=t.current.camera.rotation.y,k[2]=t.current.camera.rotation.z}})),Object(l.jsx)(C.a,{selector:"#startButton",ref:t})})),T=function(){var e=Object(s.useRef)(),t=Object(s.useContext)(d),c=t.gameStart,n=t.setGameStart,i=t.setTimeLeft,r=t.setScore,u=t.setTotalClicks,j=t.sensitivity,b=t.fov;Object(s.useEffect)((function(){}),[e]),Object(s.useEffect)((function(){c===x&&e.current.unlock()}),[c]);return Object(l.jsxs)(o.a,{onCreated:function(t){var c=document.querySelector("#cursor"),s=document.querySelector("#startOverlay");e.current.addEventListener("lock",(function(){document.body.style.cursor="none",c.style.display="initial",s.style.display="none",i(60),n(O),r(0),u(0)})),e.current.addEventListener("unlock",(function(){document.body.style.cursor="initial",c.style.display="none",s.style.display="block",e.current&&e.current.camera&&e.current.camera.rotation.set(0,0,0),n(x)})),e.current.addEventListener("change",(function(t){var c=new a.Vector3;e.current.getDirection(c)}))},children:[Object(l.jsx)("pointLight",{castShadow:!0,color:"#fff",position:[0,4,10],intensity:2}),Object(l.jsx)("ambientLight",{intensity:1}),Object(l.jsx)(g,{setScore:r}),Object(l.jsxs)("mesh",{scale:[20,10,18],position:[0,4,0],children:[Object(l.jsx)("boxGeometry",{}),Object(l.jsx)("meshPhysicalMaterial",{metalness:.7,roughness:2,color:"#fff",side:a.DoubleSide})]}),Object(l.jsx)(E,{fov:b,sensitivity:j,ref:e})]})},N=function(){var e=Object(s.useRef)(),t=function(t){e.current&&(e.current.style.left="".concat(t.clientX,"px"),e.current.style.top="".concat(t.clientY,"px"))};return Object(s.useEffect)((function(){return document.body.addEventListener("mousemove",t),function(){return document.body.removeEventListener("mousemove",t)}}),[]),Object(l.jsx)("span",{ref:e,id:"cursor",className:"cursor"})},I=c(20),_=c.n(I),L=function(){var e=Object(s.useContext)(d),t=e.timeLeft,c=e.score,n=e.totalClicks,i=e.gameStart,r=e.topScore,o=e.setTopScore,a=function(){return c*v-(n-c)*m},u=i===x||i===b,j=a(),O=n-c,f=(c/n*100).toFixed(2);return Object(s.useEffect)((function(){if(i===x){var e=a();e>r&&(o(e),localStorage.setItem("topScore",e))}}),[i]),Object(l.jsxs)("div",{class:_.a.gameOverlay,children:[Object(l.jsxs)("div",{className:_.a.counter,children:[Object(l.jsxs)("div",{children:[Object(l.jsx)("span",{style:{fontSize:"20px"},children:"Time left:"}),Object(l.jsx)("span",{style:{color:"red"},className:_.a.count,children:t})]}),Object(l.jsxs)("div",{children:[Object(l.jsx)("span",{children:"Current score:"}),Object(l.jsx)("span",{className:_.a.count,children:j})]})]}),u&&Object(l.jsxs)("div",{className:_.a.finishedOverlay,children:[Object(l.jsxs)("span",{children:["Score: ",j]}),Object(l.jsxs)("span",{children:["Hits: ",c]}),Object(l.jsxs)("span",{children:["Total Clicks: ",n]}),Object(l.jsxs)("span",{children:["Misses: ",O]}),Object(l.jsxs)("span",{children:["Accuracy: ",isNaN(f)?"N/A":"".concat(f,"%")]}),Object(l.jsxs)("span",{children:["Best Score: ",r]})]})]})},w=(c(41),function(){var e=Object(s.useContext)(d),t=e.gameStart,c=e.setGameStart,n=e.sensitivity,i=e.setSensitivity,r=e.fov,o=e.setFov,a=t===x;return Object(l.jsxs)("div",{id:"startOverlay",children:[Object(l.jsx)("h3",{className:"text",children:"Click the yellow circle in the center to start. Press ESC to exit."}),Object(l.jsx)("div",{id:"startButton",className:a?"disableStart":""}),!a&&Object(l.jsx)("div",{className:"clickTip",children:"Click the Yellow circle"}),a&&Object(l.jsx)("button",{className:"retryButton",onClick:function(){return c(b)},children:"Try Again?"}),Object(l.jsxs)("div",{className:"slidersWrapper",children:[Object(l.jsxs)("div",{className:"slider",children:[Object(l.jsxs)("div",{children:["Sensitivity: ",n]}),Object(l.jsx)("input",{type:"range",min:-6,max:6,value:n,onChange:function(e){return i(e.target.value)}})]}),Object(l.jsxs)("div",{className:"slider",children:[Object(l.jsxs)("div",{children:["FOV: ",r]}),Object(l.jsx)("input",{type:"range",min:40,max:100,value:r,onChange:function(e){return o(e.target.value)}})]}),Object(l.jsx)("div",{children:Object(l.jsx)("button",{onClick:function(){i(h),o(p)},children:"Reset Defaults"})})]})]})}),M=function(){var e=Object(s.useContext)(d),t=e.gameStart,c=e.setTotalClicks;return Object(l.jsxs)("div",{onClick:function(e){t===f&&c((function(e){return e+1}))},style:{height:"100vh",width:"100vw"},children:[Object(l.jsx)(T,{}),Object(l.jsx)(N,{}),Object(l.jsx)(w,{}),Object(l.jsx)(L,{})]})};c(42);function G(){return Object(l.jsx)(y,{children:Object(l.jsx)(M,{})})}var R=document.getElementById("root");r.a.render(Object(l.jsx)(s.StrictMode,{children:Object(l.jsx)(G,{})}),R)}},[[43,1,2]]]);
//# sourceMappingURL=main.77222981.chunk.js.map